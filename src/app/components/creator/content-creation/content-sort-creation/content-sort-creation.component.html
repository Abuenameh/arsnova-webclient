<div>
    <div cdkDropList cdkDropListOrientation="vertical" (cdkDropListDropped)="drop($event)" class="list"
         [cdkDropListDisabled]="isEditMode">
        <mat-card cdkDrag fxLayout="column" fxLayoutAlign="center" *ngFor="let answer of displayAnswers; let i = index">
            <div fxLayout="row" fxLayoutAlign="center center" class="inner">
                <mat-icon cdkDragHandle *ngIf="!isAnswerEdit > -1 && !isEditMode" class="drag-icon">
                  drag_handle
                </mat-icon>
                <span class="answer-label" *ngIf="isAnswerEdit !== i">{{ answer.answerOption.label }}</span>
                <mat-form-field class="editInput" [ngClass]="{'activeInput': isAnswerEdit === i,
        'inactiveInput': isAnswerEdit !== i}">
                    <input tabindex="-1" name="answerEdit" matInput [(ngModel)]="updatedAnswer">
                </mat-form-field>
                <span class="fill-remaining-space"></span>
                <button *ngIf="isAnswerEdit !== i" mat-icon-button (click)="goInEditMode(i, answer.answerOption.label)"
                        attr.aria-label="{{ 'content.a11y-edit-answer' | translate: {answer: answer.answerOption.label} }}"
                        matTooltip="{{ 'content.edit-answer' | translate }}">
                    <mat-icon class="editIcon">edit</mat-icon>
                </button>
                <button *ngIf="isAnswerEdit === i" mat-icon-button (click)="updateAnswer(i)"
                        matTooltip="{{ 'content.save-content-group' | translate}}" aria-labelledby="save">
                    <mat-icon class="confirmIcon">done</mat-icon>
                </button>
                <button *ngIf="isAnswerEdit === i" mat-icon-button (click)="leaveEditMode(true)"
                        matTooltip="{{ 'content.abort' | translate}}" aria-labelledby="discard">
                    <mat-icon class="confirmIcon">clear</mat-icon>
                </button>
                <button mat-icon-button *ngIf="isAnswerEdit !== i && !isEditMode" class="delete" (click)="deleteAnswer(i)"
                        attr.aria-label="{{ 'content.a11y-delete-answer' | translate: {answer: answer.answerOption.label} }}"
                        matTooltip="{{ 'content.delete-answer' | translate }}">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </mat-card>
    </div>
    <div fxLayout="row" fxLayoutAlign="center" fxLayoutGap="20px">
        <form class="answer-form" fxLayout="row">
            <mat-form-field class="answer-input" appearance="fill">
                <mat-label>{{ 'content.add-answer' | translate }}</mat-label>
                <input matInput name="answer" id="answer-input" aria-labelledby="answer" [(ngModel)]="newAnswer">
                <button class="add-button" mat-icon-button matSuffix (click)="addAnswer()">
                    <mat-icon class="add-icon">add_circle</mat-icon>
                </button>
                <mat-placeholder>{{ 'content.answer' | translate }}</mat-placeholder>
            </mat-form-field>
        </form>
    </div>
</div>

<div class="visually-hidden">
  <div id="save">{{ 'content.a11y-save-changes' | translate }}</div>
  <div id="discard">{{ 'content.a11y-discard-changes' | translate }}</div>
</div>
