<div fxLayout="row" fxLayoutAlign="center">
  <div id="live-announcer-button" tabIndex="-1" class="visually-hidden">
    {{
      (isModerator
        ? 'room-page.a11y-moderator-message'
        : 'room-page.a11y-room-message'
      )
        | a11yIntro: { room: room.name, key: room.shortId }
        | async
    }}
  </div>
  <app-loading-indicator *ngIf="isLoading"></app-loading-indicator>
  <mat-card *ngIf="!isLoading && room">
    <app-room-overview-header
      [name]="room.name"
      [shortId]="room.shortId"
      [description]="room.description"
      [renderedDescription]="room.renderedDescription"
    ></app-room-overview-header>
    <app-divider></app-divider>
    <div class="action-button-container" fxLayout="row" fxLayoutAlign="center">
      <app-room-action-button
        fxFlex
        feature="comments"
        icon="question_answer"
        hotkey="1"
        [badgeCounter]="commentCounter"
      ></app-room-action-button>
      <app-room-action-button
        fxFlex
        feature="live-feedback"
        url="feedback"
        icon="thumbs_up_down"
        hotkey="2"
      ></app-room-action-button>
    </div>
    <app-divider></app-divider>
    <div
      fxLayout="column"
      [ngClass]="{
        'group-container': contentGroups.length > 0,
        'empty-group-container': contentGroups.length === 0
      }"
    >
      <ng-container *ngIf="contentGroups?.length === 0">
        <p class="hint-sm">
          {{ 'room-page.no-content-groups' | translate }}
        </p>
        <p
          tabindex="-1"
          id="no-content-groups"
          class="visually-hidden"
          appHotkey="4"
          [appHotkeyTitle]="'content.groups' | translate"
        >
          {{ 'room-page.a11y-no-content-groups' | translate }}
        </p>
      </ng-container>
      <button
        *ngIf="!isModerator"
        id="content-group-create-button"
        mat-stroked-button
        color="primary"
        class="add-group"
        [attr.aria-label]="'room-page.a11y-create-content-group' | translate"
        (click)="openCreateContentGroupDialog()"
        appHotkey="3"
        [appHotkeyTitle]="'room-page.create-content-group' | translate"
      >
        <mat-icon>playlist_add</mat-icon>
        {{ 'room-page.create-content-group' | translate }}
      </button>
      <ng-container *ngIf="contentGroups?.length > 0">
        <p
          tabindex="-1"
          id="content-groups"
          class="visually-hidden"
          appHotkey="4"
          [appHotkeyTitle]="'content.groups' | translate"
        >
          {{
            'room-page.a11y-content-groups'
              | translate: { count: contentGroups.length }
          }}
        </p>
      </ng-container>
    </div>
    <div *ngIf="room && contentGroups">
      <app-content-groups
        *ngFor="let contentGroup of contentGroups"
        [contentGroupName]="contentGroup.name"
        [length]="contentGroup.contentIds?.length"
        [isLocked]="!contentGroup.published"
        [role]="role"
        [shortId]="room.shortId"
      ></app-content-groups>
    </div>

    <lib-extension-point
      *ngIf="!isModerator"
      extensionId="attachment-list"
      [extensionData]="attachmentData"
    ></lib-extension-point>
  </mat-card>
</div>
